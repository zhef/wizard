-*- mode: org; ; fill-column: 130 -*-

* [Терминология]

"offer", оно же "заявка", оно же "Приглашение на участие в тендере" - Сущность, связывающая тендер и поставщика.
Создается при "рассылке тендера" тем, поставщикам, которые могут поставить минимум один ресурс, содержащийся в тендере.
В процессе прохождения этапов тендера заявка меняет статусы.
В зависимости от статуса некоторые поля могут редактироваться поставщиком или застройщиком (уточнить какие именно и как)
Заявка закрывается вместе с тендером, когда выбираются победившие и проигравшие заявки.

* START [#A]  Административная кнопка для обновления шаблонов
  Чтобы мне не дергать каждый раз из консоли
* TODO [#A] Починить сортировку новостей на главной странице
  Сейчас отображаются самые старые новости. Корректная сортировка идет только внутри раздела новостей.
* TODO [#A] Опубликовать новости законодательства
  - название раздела - Новости законодательства
  - url - http://gdestroytorg.ru/laws
  - папка - laws
** Механизм для публикации pdf-файлов <file="/pathname/filename.pdf">file title</file>
* TODO Опубликовать новости по тендерам в разделе Тендеры вертикального меню.
* TODO Реализовать отображение в пункте вертикального меню Строительная техника информации по машинам.
* TODO Cделать привязку к новым корневым узлам дерева ресурсов.
* TODO Обновить дерево материалов в пункте Вертикального меню Каталог материалов - сделать привязку к новым корневым узлам дерева ресурсов.
* TODO Увеличить вертикальный размер грида материалов.
* TODO Необходимо реализовать сохранение о зарегистрированных пользователях в базу данных
* TODO Необходимо реализовать возможность регистрации пользователя с профилем Застройщик.
* TODO Доработать функционал раздела Карта поставщиков
** TODO Добавить централизацию карты
** TODO Реализовать возможность поиска поставщиков по нескольким ресурсам.
* TODO Создать в вертикальном меню пункт Готовые решения.
  В нем должно отображаться содержимое узла Готовые решения, который находится в дочернем узле ветки дерева ресурсов Каталог материалов.
* TODO В вертикальном меню добавить пункт Крупные строительные сети - Саша прислал для него информацию.
* TODO Необходимо удалить пункт Помощь из вертикального меню.
* Доработка взаимодействия кабинетов и тендеров
** Архитектурная часть
*** DONE Сущность "ресурс тендера" и контейнер для нее
*** START {2-3} Сущность "документ тендера", контейнер для нее, загрузчик с диска и место под файлы документов
*** DONE {1} Сущность "ресурс котировки" и контейнер для нее
*** WAIT ⊕ {2} Возможность обработки ошибок отсутствия сущности в контейнере - выводить 404 Not Found
**** Нужен шаблон для соответствующих 404 страниц
**** Как вывести нестардартное сообщение о 404 ошибке вместе с кодом 404 в заголовке ответа?
**** Патчинг hunchentoot/headers:start-output[167]
*** TODO {1} Сущность "документ котировки", контейнер для нее, индекс и место под файлы документов
*** WAIT {?} Рассылка емайлов (в контакте с Васей)
*** TODO {2-5} Очередь оферт через которую взаимодействуют поставщики и застройщики
*** TODO {3-5} Компонент "дерево"
*** TODO {3-6} Управление датами и интервалами
**** Класс-тип даты
**** Интерфейсная часть компонента календаря
**** Настройка прав и отображение редактирования и просмотра
** В кабинете застройщика:
*** DONE Кнопка "Создать тендер" и ее контроллер
*** DONE Всплывающее окно с полями тендера, кнопка и контроллер сохраненения полей и создания нового тендера
*** WAIT {2-4} Добавление своего поставщика
**** Кнопка и всплывающее окно
**** Контроллер добавления
**** Авторегистрация
** На стороне тендера
*** DONE Страница тендера с полями тендера для создания и редактирования застройщиком, создавшим тендер
*** DONE Грид для ресурсов тендера
*** DONE Кнопка "Добавить ресурс к тендеру" и всплывающее окно с гридом добавления ресурсов
*** TODO {1} Страница ресурса тендера с полями кол-во и прочими
*** DONE Контроллер добавления ресурсов к тендеру
*** WAIT Отдельные статусы у базовых ресурсов и возможность их изменять
*** DONE ⊕ {1:1/3} Грид для документов тендера
*** DONE ⊕ {1:1/3} Кнопка "Добавить документ", всплывающее окно с формой загрузки и контроллер загрузки
*** TODO ⊕ Страница документа тендера и хитрые права для нее (изменять поля и перегружать файл может только owner тендера)
*** TODO ⊕ Контроллеры изменения полей и перезагрузки файла
*** WAIT ⊕ Функционал сценария отмены тендера (уточнить сценарий)
*** TODO Анкета
*** DONE ⊕ {2:1/3} Грид поставщиков ресурсов для тендера и функция выборки для него.
*** START {2} Контроллер рассылки (заявок) тендера поставщикам
*** TODO {1} Грид для отвеченных заявок на тендер, видимый застройщику на странице тендера
** На стороне оферты
*** TODO {1} Страница оферты
*** TODO {3-4} Права на изменения в зависимости от статуса тендера, заявки и текущего периода
*** WAIT Анализ заявки
** На стороне поставщика
*** {2:?} Доработать кабинет поставщика, чтобы можно было редактировать все гриды
**** DELEGATED :Саша: Не добавляются ресурсы
**** DONE нет кнопок для удаления записей в гридах
*** TODO {2-3} Статусы оферт и права в зависимости от статуса оферты и тендера
*** TODO {1} Грид оферт
*** TODO {2} Страница предложения участвовать в тендере, кнопка "Участовать в тендере" и контроллер для нее
*** WAIT Страница "Специального бланка заявки", который заполняет поставщик, который хочет участвовать в тендере
*** TODO {3-4} Контроллер и права для коррекции заявки до окончания периода приема заявок.
** На стороне приглашения на собеседование
*** TODO {2} Страница приглашения на собеседование и кнопка "Создать приглашение на собеседование"
*** TODO {2-3} Коррекция цен после собеседования
*** WAIT Выбор победителя
** TODO Закрытие тендера
** WAIT Отчеты
** WAIT Экспертиза тендера
** WAIT Уведомление о победе
* Реализация котировки
** TODO {1} Функционал кнопки в шапке сайта
** TODO {2} Отдельные гриды в кабинете застройщика и поставщика
** TODO {2} Функционал логина если не авторизован
** + Все что относится к тендеру за вычетом отложенных задач [WAIT]
* Раздел "Тендеры" в стиле новостей
** TODO {2-3} Написать парсер для файлов тендеров
** TODO {1} Страница списка тендеров
** TODO {2} Страница тендера в стиле страницы новости
*** Описание полей шаблона страницы тендера: tpl/tender_tpl_description.html
*** Верстка списка тендеров: tpl/tender_list.html
*** Верстка непосредственно страницы тендера: tpl/tender.html
* TODO {?} Обновление дерева ресурсов
** Базу обновили или снова сливать со старого сайта?
* TODO {1} Страница "Крупные строительные сети" - Саша Шугаев + ошибка при добавлении ресурсов
*** ее содержимое оформлено в файле tpl/big_shop_grid.htm
*** Опубликовать на сайте и дать на нее ссылку из вертикального меню (новый пункт - "Крупные торговые сети")
* TODO {?} Выделение пунктов меню (посмотреть как реализовать)
* TODO {2-3} (#178) Сохранение данных о зарегистрированных пользователях в базу данных
* Доработка поиска
** TODO {1-5} (#179) При поиске по слову Бетон условие поиска По ресурсам выдается список фирм, к которым ресурс бетон не привязан. К ним вообще ничего не привязано.
** TODO {1-5} (#179) При аналогичном поиске По карте выдается ошибка 504 Gateway Time-out nginx/0.7.65
* Доработка раздела акции
** Что там нужно сделать?
* TODO {1} Главная страница
** Блок "Тендер дня" в нем текст названия тендера является ссылкой на tpl/tender_day.html
** В последующем по этой ссылке будет открываться стандартный шаблон представления информации по тендеру.
* Карта поставщиков
** {2-5} Нужно сделать центровку карты по введенному адресу с автоматическим масштабированием карты до 2х километров в 1см.
** {?} Также нужна возможность ввода дополнительных ресурсов. Уточнить как именно.
* Доска объявлений - ТЗ будет в конце недели
* Доработка раздела акции (ТЗ Лена тебе сегодня скинет)
* Страничка для релоада базы
